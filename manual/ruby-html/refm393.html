<?xml version="1.0" encoding="EUC-JP" ?>
<!DOCTYPE html 
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>obsolete</title>
<meta http-equiv="Content-type" content="text/html; charset=EUC-JP" />
<link href="default.css" type="text/css" rel="stylesheet" />
<link href="refm394.html" rel="next" />
<link href="refm392.html" rel="prev" />
<link href="index.html" rel="start" />

</head>
<body>
<div class="navigator"><span class="navigator">[<a href="index.html">MAIN</a>][<a href="refm539.html">INDEX</a>]&nbsp;&nbsp;&nbsp;[<a href="index.html">TOP</a>][<a href="refm382.html">UP</a>][<a href="refm392.html">&lt;-PREV</a>][<a href="refm394.html">NEXT-&gt;</a>]</span></div>
<hr />

<h1><a name="L009168" id="L009168">過去の遺物</a></h1>
<p>以下に挙げる変数名、メソッド名、オブジェクト名は古い名前です。
使用すると、警告が出たり、ある日突然なくなったりするかもしれません。</p>
<h2><a name="L009169" id="L009169">過去のメソッド</a></h2>
<dl>
<dt><a name="L009170" id="L009170">String#~</a></dt>
<dt><a name="L009171" id="L009171">String#=~</a></dt>
<dd>
<p>~str は、1.8 以降削除されました。また、str =~ str は例外が出るように
なりました。</p>
</dd>
<dt><a name="L009172" id="L009172">Object#id</a></dt>
<dd>
<p>1.8 では警告されます。代わりに Object#object_id を使ってください。</p>
<pre>$ ruby-1.8.0 -we 'p Object.new.id'
-e:1: warning: Object#id will be deprecated; use Object#object_id
537752050</pre>
</dd>
<dt><a name="L009173" id="L009173">Object#type</a></dt>
<dd>
<p>1.8 では警告されます。代わりに Object#class を使ってください。</p>
<pre>$ ruby-1.8.0 -we 'p Object.new.type'
-e:1: warning: Object#type is deprecated; use Object#class
Object</pre>
</dd>
<dt><a name="L009174" id="L009174">Object#to_a</a></dt>
<dd>
<p>Object#to_a は将来廃止されます。Kernel#Array を使ってください。</p>
<pre>$ ruby-1.8.0 -e 'p Object.new.to_a'
-e:1: warning: default `to_a' will be obsolete
[#&lt;Object:0x401ae3e4&gt;]

$ ruby-1.8.0 -we 'p Array(Object.new)'
[#&lt;Object:0x401ae3d0&gt;]</pre>
</dd>
<dt><a name="L009175" id="L009175">FileTest.exists?</a></dt>
<dd>
<p>三単現の S は付けないという命名規則に反するので避けるべきです。
<a href="refm074.html#L001941">FileTest.exist?</a> を使ってください。
→ <a href="http://www.freeml.com/ml_view.php?ml=rubyist&pg=1194">rubyist:1194</a><sup class="outside"><small>[外部]</small></sup></p>
</dd>
<dt><a name="L009176" id="L009176">indexes, indicies (<a href="refm036.html">Array</a>, <a href="refm044.html">Hash</a>, <a href="refm033.html">ENV</a>)</a></dt>
<dd>
<p><a href="refm384.html">version 1.7</a> では、使用すると</p>
<pre>warning: Array#indexes is deprecated; use Array#select</pre>
<p>と警告が出ます。</p>
<ul>
<li>indexの複数形はindexesとindicesの両方があるのが混乱のも
    と(両方提供してるけど)</li>
<li>index(値を指定してそのインデックスを得る)メソッド
    とindexes(インデックスを複数指定して対応する値の配列を得
    る)は同じ単語なのに意味が逆というのは致命的</li>
</ul>
<p>ということからだそうです<a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-dev/16084">ruby-dev:16084</a><sup class="outside"><small>[外部]</small></sup>。</p>
<p><a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/10830">ruby-talk:10830</a><sup class="outside"><small>[外部]</small></sup>, <a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/11066">ruby-talk:11066</a><sup class="outside"><small>[外部]</small></sup>, <a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-dev/16082">ruby-dev:16082</a><sup class="outside"><small>[外部]</small></sup> 
などで議論が起こっていました。</p>
<p>警告メッセージにあるように select がその候補になっています。</p>
<p><a href="refm385.html">ruby 1.8 feature</a>: その後、<a href="refm036.html#L000804">values_at</a> が採用されまし
た<a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-dev/20153">ruby-dev:20153</a><sup class="outside"><small>[外部]</small></sup>。</p>
</dd>
<dt><a name="L009177" id="L009177">Array#filter</a></dt>
<dd>
<p>Array#collect! に置き換えられました。</p>
<p>このメソッドを使用すると警告メッセージが出ます。
(1.8 ではこのメソッドはなくなりました。)</p>
</dd>
<dt><a name="L009178" id="L009178">Time.times</a></dt>
<dd>
<p><a href="refm081.html">Process.times</a> に移動しました。
1.8 で <code>Time.times</code> を使うと警告されます。</p>
<pre>$ ruby-1.8.0 -e 'p Time.times'
-e:1: warning: obsolete method Time::times; use Process::times
#&lt;struct Struct::Tms utime=0.0, stime=0.0, cutime=0.0, cstime=0.0&gt;</pre>
</dd>
<dt><a name="L009179" id="L009179">iterator?</a></dt>
<dd>
<p>メソッドに付いたブロックは必ずしも繰り返さないので、
ブロック付きメソッドをイテレータと呼ぶのは不適切です。
今後は block_given? を使ってください。</p>
<p>が、イテレータという用語自体は依然使われ続けていますし、
この関数を使っても警告はされません。</p>
</dd>
<dt><a name="L009180" id="L009180"><a href="refm079.html">ObjectSpace</a>.add_finalizer</a></dt>
<dt><a name="L009181" id="L009181"><a href="refm079.html">ObjectSpace</a>.remove_finalizer</a></dt>
<dt><a name="L009182" id="L009182"><a href="refm079.html">ObjectSpace</a>.call_finalizer</a></dt>
<dt><a name="L009183" id="L009183"><a href="refm079.html">ObjectSpace</a>.finalizers</a></dt>
<dd>
<p>Ruby 1.8 ではこれらのメソッドを使うと警告されます。
これらのメソッドは以前 final ライブラリで提供されていたメソッド</p>
<ul>
<li>ObjectSpace.define_finalizer</li>
<li>ObjectSpace.undefine_finalizer</li>
</ul>
<p>が組み込みになったので不要です。
従って、今後は final ライブラリも obsolete です。</p>
</dd>
</dl>
<h2><a name="L009184" id="L009184">過去のクラス</a></h2>
<dl>
<dt><a name="L009185" id="L009185">NotImplementError</a></dt>
<dd>
<p><a href="refm089.html">NotImplementedError</a>の旧称。
<a href="refm385.html">version 1.8</a> では既に削除されています。</p>
</dd>
<dt><a name="L009186" id="L009186">MatchingData</a></dt>
<dd>
<p><a href="refm047.html">MatchData</a>の旧称</p>
</dd>
</dl>
<h2><a name="L009187" id="L009187">過去の組み込み変数、定数</a></h2>
<dl>
<dt><a name="L009188" id="L009188"><code>$~</code>, <code>$!</code> 等、全般</a></dt>
<dd>
<p>なくなることはないと思いますが、基本的に使わないのが
最近のスタイルです。少なくとも今後増えることはありません。
無理に使うのをやめる必要はありませんが、代替になる記法が
ある場合はそちらを使うほうがきれいになることが多々あります。
例えば (<a href="refm060.html">Regexp</a>.last_match や <a href="refm081.html">Process</a>.waitpid2、
rescue =&gt; var などです。</p>
<p>ただし <code>$=</code> (文字列の比較で大文字小文字を無視するか決める)
だけは obsolete であると明言されました (<a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-dev/12978">ruby-dev:12978</a><sup class="outside"><small>[外部]</small></sup>)。
Ruby 1.8 では警告が出ます。</p>
<pre>$ ruby-1.8.0 -e '$= = false'
-e:1: warning: modifying $= is deperecated</pre>
<p>Ruby 1.8 では既に文字列のハッシュ値が $= の値に依存しなく
なっています。<a href="http://www.ruby-lang.org/cgi-bin/ruby-bugs-ja?selectid=61">ruby-bugs-ja:PR#61</a><sup class="outside"><small>[外部]</small></sup></p>
<pre>p &quot;foobar&quot;.hash
$= = true
p &quot;foobar&quot;.hash

# Ruby 1.6.8 の結果
594908901
-24977883

# Ruby 1.8.0 の結果
594908901
594908901</pre>
</dd>
<dt><a name="L009189" id="L009189">$defout, $deferr</a></dt>
<dd>
<p>version 1.8 以降、$stdout, $stderr が代わりに利用されるようになりま
した。version 1.8 では、$stdout, $stderr, $stdin にリダイレクトの効
果はなくなっています。($deferr は version 1.8.0 preview で定義された
変数です)。</p>
<p>$defout, $deferr にオブジェクトを代入すると警告が出力されます。</p>
</dd>
<dt><a name="L009190" id="L009190">TRUE, FALSE, NIL</a></dt>
<dd>
<p>はるか昔のバージョンの Ruby では true false nil がなかったので
代わりに定数が使われていたのですが、今となっては不要です。
速やかに移行してください。</p>
</dd>
<dt><a name="L009191" id="L009191">VERSION, RELEASE_DATE, PLATFORM</a></dt>
<dd>
<p>Ruby 1.9 では廃止されました。それぞれ「RUBY_」を前置した
RUBY_VERSION, RUBY_RELEASE_DATE, RUBY_PLATFORM を使ってください。</p>
</dd>
</dl>
<h2><a name="L009192" id="L009192">その他過去のもの</a></h2>
<dl>
<dt><a name="L009193" id="L009193">正規表現の //p オプション</a></dt>
<dd>
<p>1.6 では警告されます。
1.8 では廃止されました。</p>
<p>入れ代わりに m オプションが導入されましたが
これは p オプションとは意味がまったく違います。
p はメタ文字「.」「^」「$」の意味を変えるオプションでした。
m は「.」を改行にマッチするように変えるだけです。</p>
<p>p オプションが廃止されたのは以下の理由からです。</p>
<ul>
<li>定義が複雑である</li>
<li>//m と 正規表現 \A \Z を使って表現可能である</li>
<li>p と m を両方提供するにはフラグのビット数が足りない</li>
</ul>
<p>詳細は <a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-list/22483">ruby-list:22483</a><sup class="outside"><small>[外部]</small></sup> を参照してください。</p>
</dd>
</dl>

<hr />
<div class="navigator"><span class="navigator">[<a href="index.html">MAIN</a>][<a href="refm539.html">INDEX</a>]&nbsp;&nbsp;&nbsp;[<a href="index.html">TOP</a>][<a href="refm382.html">UP</a>][<a href="refm392.html">&lt;-PREV</a>][<a href="refm394.html">NEXT-&gt;</a>]</span></div>

</body>
</html>
