<?xml version="1.0" encoding="EUC-JP" ?>
<!DOCTYPE html 
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>OpenSSL::SSL::SSLServer</title>
<meta http-equiv="Content-type" content="text/html; charset=EUC-JP" />
<link href="default.css" type="text/css" rel="stylesheet" />
<link href="refm229.html" rel="next" />
<link href="refm227.html" rel="prev" />
<link href="index.html" rel="start" />

</head>
<body>
<div class="navigator"><span class="navigator">[<a href="index.html">MAIN</a>][<a href="refm539.html">INDEX</a>]&nbsp;&nbsp;&nbsp;[<a href="index.html">TOP</a>][<a href="refm226.html">UP</a>][<a href="refm227.html">&lt;-PREV</a>][<a href="refm229.html">NEXT-&gt;</a>]</span></div>
<hr />

<h1><a name="L004512" id="L004512">OpenSSL::SSL::SSLServer</a></h1>
<p>SSL サーバーのためのクラス。<a href="refm163.html">TCPServer</a> に対応する。</p>
<p>以下はクライアントからの入力を出力するだけの echo サーバーの例。</p>
<pre>require 'socket'
require 'openssl'

include OpenSSL

ctx = SSL::SSLContext.new()
ctx.cert = X509::Certificate.new(File.read('cert.pem'))
ctx.key = PKey::RSA.new(File.read('privkey.pem'))
svr = TCPServer.new(2007)
serv = SSL::SSLServer.new(svr, ctx)

loop do
  while soc = serv.accept
    puts soc.read
  end
end</pre>
<h2><a name="L004513" id="L004513">クラスメソッド</a></h2>
<dl>
<dt><a name="L004514" id="L004514"><code>SSLServer.new(<var>svr</var>, <var>ctx</var>)</code></a></dt>
<dd>
<p>svr には <a href="refm163.html">TCPServer</a> オブジェクトを、ctx には <a href="refm229.html">OpenSSL::SSL::SSLContext</a> オブジェクトを取る。</p></dd>
</dl>
<h2><a name="L004515" id="L004515">メソッド</a></h2>
<dl>
<dt><a name="L004516" id="L004516"><code>to_io</code></a></dt>
<dd>
<p><a href="refm163.html">TCPServer</a> オブジェクトを返す。</p></dd>
<dt><a name="L004517" id="L004517"><code>accept</code></a></dt>
<dd>
<p>TLS/SSL クライアントから接続を受け付け、<a href="refm227.html">OpenSSL::SSL::SSLSocket</a> オブジェクトを返す。start_immediately が真なら SSLSocket#accept を呼び TLS/SSL ハンドシェイクを実行してから SSLSocket オブジェクトを返す。</p></dd>
<dt><a name="L004518" id="L004518"><code>addr</code></a></dt>
<dd>
<p><a href="refm161.html#L003074">IPSocket#addr</a> と同様。</p></dd>
<dt><a name="L004519" id="L004519"><code>close</code></a></dt>
<dd>
<p>接続を閉じる。</p></dd>
<dt><a name="L004520" id="L004520"><code>closed?</code></a></dt>
<dd>
<p>close していたら true を返す。</p></dd>
<dt><a name="L004521" id="L004521"><code>do_not_reverse_lookup=</code></a></dt>
<dd>
<p><a href="refm160.html#L003055">BasicSocket#do_not_reverse_lookup</a> と同様。</p></dd>
<dt><a name="L004522" id="L004522"><code>fcntl(<var>cmd</var>[, <var>arg</var>])</code></a></dt>
<dd>
<p><a href="refm045.html#L001010">IO#fcntl</a> と同様。</p></dd>
<dt><a name="L004523" id="L004523"><code>getsockopt(<var>level</var>, <var>optname</var>)</code></a></dt>
<dd>
<p><a href="refm160.html#L003062">BasicSocket#getsockopt</a> と同様。</p></dd>
<dt><a name="L004524" id="L004524"><code>listen</code></a></dt>
<dd>
<p><a href="refm163.html#L003093">TCPServer#listen</a> と同様。</p></dd>
<dt><a name="L004525" id="L004525"><code>peeraddr</code></a></dt>
<dd>
<p><a href="refm161.html#L003075">IPSocket#peeraddr</a> と同様。</p></dd>
<dt><a name="L004526" id="L004526"><code>setsockopt</code></a></dt>
<dd>
<p><a href="refm160.html#L003066">BasicSocket#setsockopt</a> と同様。</p></dd>
<dt><a name="L004527" id="L004527"><code>start_immediately</code></a>
<dt><a name="L004528" id="L004528"><code>start_immediately=(<var>true</var> || <var>false</var>)</code></a></dt>
<dd>
<p>accept したらすぐに TLS/SSL ハンドシェイクを実行するかどうかを設定する。デフォルトでは true。</p></dd>
</dl>

<hr />
<div class="navigator"><span class="navigator">[<a href="index.html">MAIN</a>][<a href="refm539.html">INDEX</a>]&nbsp;&nbsp;&nbsp;[<a href="index.html">TOP</a>][<a href="refm226.html">UP</a>][<a href="refm227.html">&lt;-PREV</a>][<a href="refm229.html">NEXT-&gt;</a>]</span></div>

</body>
</html>
