<?xml version="1.0" encoding="EUC-JP" ?>
<!DOCTYPE html 
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>profile</title>
<meta http-equiv="Content-type" content="text/html; charset=EUC-JP" />
<link href="default.css" type="text/css" rel="stylesheet" />
<link href="refm343.html" rel="next" />
<link href="refm341.html" rel="prev" />
<link href="index.html" rel="start" />

</head>
<body>
<div class="navigator"><span class="navigator">[<a href="index.html">MAIN</a>][<a href="refm539.html">INDEX</a>]&nbsp;&nbsp;&nbsp;[<a href="index.html">TOP</a>][<a href="refm115.html">UP</a>][<a href="refm341.html">&lt;-PREV</a>][<a href="refm343.html">NEXT-&gt;</a>]</span></div>
<hr />

<h1><a name="L006561" id="L006561">profile</a></h1>
<p>Ruby プログラムのためのプロファイラです。プロファイラとは効率改善のた
めの調査に用いられるツールのことで、profile は各メソッドの実行時間に
関する統計を出力します。<a name="footmark:1" id="footmark:1" href="#foottext:1"><sup><small>*1</small></sup></a></p>
<h2><a name="L006562" id="L006562">使い方:</a></h2>
<pre>$ ruby -r profile foo.rb</pre>
<p>実行が終ると標準エラー出力にプロファイルを出力します。</p>
<p>プロファイルは各メソッドの実行時間に関する統計からなりますが、この時間
には大きく分けて2種類あります。ひとつは、メソッドが呼び出されてから返
るまでの時間です。もうひとつは、全体の時間からそのメソッド内で行なわれ
た他の呼び出しに費やしたすべての時間を引いた時間です。以下の説明では前
者を<em>全体時間</em>、後者を<em>正味時間</em>と呼ぶことにします。</p>
<h2><a name="L006563" id="L006563">出力の意味</a></h2>
<p>プロファイルの結果は例えば次のようになります。</p>
<pre>$ ruby -r profile sample/sieve.rb 1000
2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47 … 略 …
  %   cumulative   self              self     total
 time   seconds   seconds    calls  ms/call  ms/call  name
 33.87     1.49      1.49       11   135.65   214.49  Fixnum#step
 31.38     2.88      1.38     2410     0.57     0.57  Array#[]=
 27.84     4.10      1.23        2   613.28  2070.31  Range#each
  4.26     4.29      0.19        1   187.50   234.38  Array#join
  1.06     4.34      0.05      168     0.28     0.28  Fixnum#to_s
  0.35     4.35      0.02       31     0.50     0.50  Fixnum#+
… 以下略 …</pre>
<p>おのおのの行に現れる各フィールドの意味は左から順に次の通りです。</p>
<ol>
<li>全体時間のパーセンテージ</li>
<li>全体時間の総和(単位は秒)</li>
<li>正味時間の総和(秒)</li>
<li>呼び出された回数</li>
<li>1回の呼び出し当たりの平均正味時間(ミリ秒)</li>
<li>1回の呼び出し当たりの平均全体時間(ミリ秒)</li>
<li>メソッド名</li>
</ol>
<hr />
<p class="foottext">
<a name="foottext:1" id="foottext:1" href="#footmark:1"><sup><small>*1</small></sup></a><small>profile はそれ自身がオーバーヘッドになる
ためメソッド呼び出しあたりの処理時間がかなり遅くなります。
<a href="http://raa.ruby-lang.org/list.rhtml?name=RbProf">RAA:RbProf</a><sup class="outside"><small>[外部]</small></sup> というのがあり、こちらの方が速いようです</small><br />
</p>
<hr />
<div class="navigator"><span class="navigator">[<a href="index.html">MAIN</a>][<a href="refm539.html">INDEX</a>]&nbsp;&nbsp;&nbsp;[<a href="index.html">TOP</a>][<a href="refm115.html">UP</a>][<a href="refm341.html">&lt;-PREV</a>][<a href="refm343.html">NEXT-&gt;</a>]</span></div>

</body>
</html>
