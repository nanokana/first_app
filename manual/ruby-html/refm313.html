<?xml version="1.0" encoding="EUC-JP" ?>
<!DOCTYPE html 
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Sync_m</title>
<meta http-equiv="Content-type" content="text/html; charset=EUC-JP" />
<link href="default.css" type="text/css" rel="stylesheet" />
<link href="refm314.html" rel="next" />
<link href="refm312.html" rel="prev" />
<link href="index.html" rel="start" />

</head>
<body>
<div class="navigator"><span class="navigator">[<a href="index.html">MAIN</a>][<a href="refm539.html">INDEX</a>]&nbsp;&nbsp;&nbsp;[<a href="index.html">TOP</a>][<a href="refm312.html">UP</a>][<a href="refm312.html">&lt;-PREV</a>][<a href="refm314.html">NEXT-&gt;</a>]</span></div>
<hr />

<h1><a name="L006125" id="L006125">Sync_m</a></h1>
<p>スレッド同期機構である再入可能な reader/writer ロック機能を Mix-in により提供する。</p>
<p>includeしたクラスではinitializeでsuperを呼び出しておく必要がある。
(<a href="refm384.html">ruby 1.7 feature</a>)</p>
<h2><a name="L006126" id="L006126">ロック状態</a></h2>
<dl>
<dt><a name="L006127" id="L006127"><code>Sync_m::UN</code></a></dt>
<dd>
<p>ロックされていない状態。</p></dd>
<dt><a name="L006128" id="L006128"><code>Sync_m::EX</code></a></dt>
<dd>
<p>排他ロック。
オブジェクトの状態を更新する場合のように、
1つのスレッドがオブジェクトを独占的に使用したい場合に用いる。
排他ロック中に他のスレッドはオブジェクトを共有/排他ロックできない。</p></dd>
<dt><a name="L006129" id="L006129"><code>Sync_m::SH</code></a></dt>
<dd>
<p>共有ロック。
複数のスレッドが同時にオブジェクトを使用できる場合に用いる。
複数のスレッドが共有ロックしている場合、
どのスレッドもオブジェクトを排他ロックできない。</p></dd>
</dl>
<h2><a name="L006130" id="L006130">モジュールメソッド</a></h2>
<dl>
<dt><a name="L006131" id="L006131"><code>sync_mode</code></a></dt>
<dd>
<p>現在のロック状態を返す。</p></dd>
<dt><a name="L006132" id="L006132"><code>sync_locked?</code></a>
<dt><a name="L006133" id="L006133"><code>locked?</code></a></dt>
<dd>
<p>ロックされているかどうかを返す。</p></dd>
<dt><a name="L006134" id="L006134"><code>sync_shared?</code></a>
<dt><a name="L006135" id="L006135"><code>shared?</code></a></dt>
<dd>
<p>共有ロックされているかどうかを返す。</p></dd>
<dt><a name="L006136" id="L006136"><code>sync_exclusive?</code></a>
<dt><a name="L006137" id="L006137"><code>exclusive?</code></a></dt>
<dd>
<p>排他ロックされているかどうかを返す。</p></dd>
<dt><a name="L006138" id="L006138"><code>sync_try_lock(<var>mode</var> = <var>EX</var>)</code></a>
<dt><a name="L006139" id="L006139"><code>try_lock(<var>mode</var> = <var>EX</var>)</code></a></dt>
<dd>
<p>ロック状態を変更する。
変更できたかどうかをtrueかfalseで返し、ブロックしない。</p></dd>
<dt><a name="L006140" id="L006140"><code>sync_lock(<var>mode</var> = <var>EX</var>)</code></a>
<dt><a name="L006141" id="L006141"><code>lock(<var>mode</var> = <var>EX</var>)</code></a></dt>
<dd>
<p>ロック状態を変更する。
変更できるまで現在のスレッドの実行をブロックする。</p></dd>
<dt><a name="L006142" id="L006142"><code>sync_unlock(<var>mode</var> = <var>EX</var>)</code></a>
<dt><a name="L006143" id="L006143"><code>unlock(<var>mode</var> = <var>EX</var>)</code></a></dt>
<dd>
<p>ロックを解除する。</p></dd>
<dt><a name="L006144" id="L006144"><code>sync_synchronize(<var>mode</var> = <var>EX</var>) {...}</code></a>
<dt><a name="L006145" id="L006145"><code>synchronize(<var>mode</var> = <var>EX</var>) {...}</code></a></dt>
<dd>
<p>ロック状態を変更してブロックを実行する。</p></dd>
</dl>

<hr />
<div class="navigator"><span class="navigator">[<a href="index.html">MAIN</a>][<a href="refm539.html">INDEX</a>]&nbsp;&nbsp;&nbsp;[<a href="index.html">TOP</a>][<a href="refm312.html">UP</a>][<a href="refm312.html">&lt;-PREV</a>][<a href="refm314.html">NEXT-&gt;</a>]</span></div>

</body>
</html>
